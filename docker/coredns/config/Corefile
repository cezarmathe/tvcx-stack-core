tvcxn.et:53 {
    errors
    log
    reload
    file /zones/db.tvcxn.et {
        reload 1m
    }
}

# Forward the DNS requests to Consul.
 {{ config_template.consul_domain }}:53 {
    cache 60
    errors
    log
    reload
    forward . {{ config_template.consul_address }}
}

.:53 {
    cache 30
    errors
    forward . tls://1.1.1.1 tls://1.0.0.1 {
       tls_servername cloudflare-dns.com
       health_check 5s
    }
    reload
}
